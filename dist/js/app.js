angular.module("ptoApp",["ui.router","ngResource","ui.bootstrap","colorpicker.module"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app",{url:"/",views:{header:{templateUrl:"./views/header.html",controller:"HeaderController"},info:{templateUrl:"./views/login.html",controller:"LoginController"},body:{templateUrl:"./views/loginBody.html",controller:""},secondBody:{templateUrl:"./views/loginSecondBody.html",controller:""}}}).state("app.employee",{url:"employee",views:{"info@":{templateUrl:"./views/info.html",controller:"InfoController"},"body@":{templateUrl:"./views/body.html",controller:"BodyController"},"secondBody@":{templateUrl:"./views/secondBody.html",controller:"SecondBodyController"}}}).state("app.approver",{url:"approver",views:{"info@":{templateUrl:"./views/infoApprover.html",controller:"InfoApproverController"},"body@":{templateUrl:"./views/bodyApprover.html",controller:"BodyApproverController"},"secondBody@":{templateUrl:"./views/secondBodyApprover.html",controller:"SecondBodyApproverController"}}}).state("app.admin",{url:"admin",views:{"info@":{templateUrl:"./views/infoAdmin.html",controller:"InfoAdminController"},"body@":{templateUrl:"./views/bodyAdmin.html",controller:"BodyAdminController"},"secondBody@":{templateUrl:"./views/secondBodyAdmin.html",controller:"UsersAdminController"}}}).state("app.adminTimeType",{url:"admin/timeType",views:{"info@":{templateUrl:"./views/infoAdmin.html",controller:"InfoAdminController"},"body@":{templateUrl:"./views/body_time_type.html",controller:"TimeTypeAdminController"},"secondBody@":{templateUrl:"./views/secondBodyAdmin.html",controller:"BodyAdminController"}}}).state("app.adminTimeState",{url:"admin/timestate",views:{"info@":{templateUrl:"./views/infoAdmin.html",controller:"InfoAdminController"},"body@":{templateUrl:"./views/body_time_state.html",controller:"TimeStateAdminController"},"secondBody@":{templateUrl:"./views/secondBodyAdmin.html",controller:"BodyAdminController"}}}).state("app.adminTimeOffGroup",{url:"admin/timeOffGroup",views:{"info@":{templateUrl:"./views/infoAdmin.html",controller:"InfoAdminController"},"body@":{templateUrl:"./views/body_time_off_group.html",controller:"TimeOffGroupAdminController"},"secondBody@":{templateUrl:"./views/secondBodyAdmin.html",controller:"TimeOffGroupAdminController"}}});t.otherwise("/")}]);angular.module("ptoApp").filter("capitalize",function(){return function(e){return!!e?e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():""}}).filter("capitalizeTitle",function(){return function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}});angular.module("ptoApp").directive("cardView",["$filter",function(e){return{restrict:"E",scope:{cardobj:"=fcardobj",settings:"=fsettings"},controller:["$scope","$element","$attrs","$location","$injector",function(e,t,o,n,r){console.log(e.cardobj.timeOffGroup);e.dt=new Date;e.today=function(){e.dt=new Date};e.today();e.clear=function(){e.dt=null};e.inlineOptions={customClass:s,minDate:new Date,showWeeks:true};e.dateOptions={dateDisabled:a,formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1};function a(e){var t=e.date,o=e.mode;return o==="day"&&(t.getDay()===0||t.getDay()===6)}e.toggleMin=function(){e.inlineOptions.minDate=e.inlineOptions.minDate?null:new Date;e.dateOptions.minDate=e.inlineOptions.minDate};e.toggleMin();e.open=function(t){console.log("open1:"+e.popup1.opened);e.popup1.opened=true};e.open2=function(){e.popup2.opened=true};e.setDate=function(t,o,n){e.dt=new Date(t,o,n)};e.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"];e.format=e.formats[0];e.altInputFormats=["M!/d!/yyyy"];e.popup1={opened:false};e.popup2={opened:false};var i=new Date;i.setDate(i.getDate()+1);var l=new Date;l.setDate(i.getDate()+1);e.events=[{date:i,status:"full"},{date:l,status:"partially"}];function s(t){var o=t.date,n=t.mode;if(n==="day"){var r=new Date(o).setHours(0,0,0,0);for(var a=0;a<e.events.length;a++){var i=new Date(e.events[a].date).setHours(0,0,0,0);if(r===i){return e.events[a].status}}}return""}}],replace:true,templateUrl:"views/card_view.html"}}]);angular.module("ptoApp").directive("colorChangeCard",["$filter",function(e){return{restrict:"E",scope:{cardtitle:"@",cardobj:"=",updatedb:"&update"},controller:["$scope","$element","$attrs","$location","$injector",function(e,t,o,n,r){e.colorChange={color:"#FFF"};e.editColor=function(){e.cardobj.cardState==="edit"?e.cardobj.cardState="view":e.cardobj.cardState="edit";if(e.cardobj.cardState==="view"){e.updatedb({value:e.cardobj})}}}],replace:true,templateUrl:"views/color_change_card.html"}}]);$(function(){console.log("getting color picker");$("#cp2").colorpicker()});"use strict";angular.module("ptoApp").controller("InfoController",["$scope",function(e,t){}]).controller("ContainerController",["$scope","$state",function(e,t){e.$state=t}]).controller("LoginController",["$scope","$state","$window","$http",function(e,t,o,n){e.$state=t;gapi.load("client:auth2",r);function r(){gapi.client.init({apiKey:"AIzaSyDaMf0eviuFygt1hzwQz03a2k2lrLDnpIc",discoveryDocs:["https://people.googleapis.com/$discovery/rest?version=v1"],clientId:"977491754644-954b83j2evmq65v6kchq4dsd9j0ud4vg.apps.googleusercontent.com",scope:"profile"}).then(function(){gapi.auth2.getAuthInstance().isSignedIn.listen(a);a(gapi.auth2.getAuthInstance().isSignedIn.get())})}function a(e){if(e){i()}}e.handleSignInClick=function(e){console.log(gapi.auth2.getAuthInstance().isSignedIn.get());if(!gapi.auth2.getAuthInstance().isSignedIn.get()){gapi.auth2.getAuthInstance().signIn()}};e.handleSignOutClick=function(e){console.log(gapi.auth2.getAuthInstance().isSignedIn.get());if(gapi.auth2.getAuthInstance().isSignedIn.get()){gapi.auth2.getAuthInstance().signOut()}};function i(){gapi.client.people.people.get({resourceName:"people/me"}).then(function(e){console.log("Hello, "+e.result.names[0].givenName)},function(e){console.log("Error: "+e.result.error.message)})}var l;var s;n.get("url").then(function(e){l=e.data});e.login=function(){s=o.open(l,"Please sign in with Google","width=500px,height=700px")};window.onmessage=function(e){if(s)s.close();var t=e.data;var o=t.lastIndexOf("code=");if(o===-1)return;var r=t.substring(o+5).replace("#","");console.log("show myCode: "+r);n.get("token?code="+r).then(function(e){console.log("im response: "+e.data.access_token);var t="https://www.googleapis.com/plus/v1/people/me?access_token="+e.data.access_token;n.get(t).then(function(e){console.log("user info: "+JSON.stringify(e.data))})})}}]).controller("BodyController",["$scope",function(e,t){e.testData={timeOffGroup:"paid time off",employeeName:"Todd Coulson",dateTime:"17 Mar 2017",endDateTime:"28 Mar 2017",startTime:"9:30a",endTime:"10:30a",message:"Vacation Paris",approverName:"awaiting approval",approverMessage:"Client meeting that day, we need you!"};e.testSetting={cardType:"edit",timeType:"daily",timeStatus:"pending"}}]).controller("SecondBodyController",["$scope","$state",function(e,t){e.tab=1;e.filtText="";e.showDetails=false;e.showDelete=false;e.showMenu=false;e.message="Loading ...";e.testData={timeOffGroup:"vacation",employeeName:"Todd Coulson",dateTime:"17 Mar 2017",endDateTime:"28 Mar 2017",startTime:"9:30a",endTime:"10:30a",message:"Vacation Paris",approverName:"awaiting approval",approverMessage:"Client meeting that day, we need you!"};e.testSetting={cardType:"view",timeType:"daily",timeStatus:"pending"}}]).controller("InfoApproverController",["$scope","$state",function(e,t){}]).controller("InfoAdminController",["$scope","$state",function(e,t){e.stateis=function(e){return t.is(e)}}]).controller("BodyApproverController",["$scope","$state",function(e,t){e.testData={timeType:"Multiple Days",timeStatus:"pending request",employeeName:"Todd Coulson",dateTime:"17 Mar 2017",endDateTime:"28 Mar 2017",startTime:"9:30a",endTime:"10:30a",message:"Vacation Paris",approverMessage:"Client meeting that day, we need you!"}}]).controller("BodyAdminController",["$scope","$state",function(e,t){e.testUserAdminData={name:"Todd Coulson",employeeStartDate:"15-OCT-2016",carryoverHours:0,allocatedHoursYear:80,remainingHours:35};e.testUserAdminSetting={cardType:"view"};e.testAdminSetting={cardType:"view"}}]).controller("SecondBodyApproverController",["$scope","$state",function(e,t){}]).controller("TimeStateAdminController",["$scope","$state","timeStateFactory",function(e,t,o){e.timeState=[];o.query(function(t){t.forEach(function(t,o){e.timeState.push({id:t.timestateid,entityValue:t.timeState,entityColor:t.timeStateColor,cardState:"view"})})},function(t){console.log(t);e.message="Error: "+t.status+" "+t.statusText});e.updateDB=function(e){o.update({timestateid:e.id},{timeState:e.entityValue,timeStateColor:e.entityColor})}}]).controller("TimeTypeAdminController",["$scope","$state","timeTypeFactory",function(e,t,o){e.timeType=[];o.query(function(t){t.forEach(function(t,o){e.timeType.push({id:t.timetypeid,entityValue:t.timeType,entityColor:"#FFF",cardState:"view"})})},function(t){console.log(t);e.message="Error: "+t.status+" "+t.statusText});e.updateDB=function(e){o.update({timetypeid:e.id},{timeType:e.entityValue})}}]).controller("TimeOffGroupAdminController",["$scope","$state","timeOffGroupFactory",function(e,t,o){e.timeOffGroup=[];o.query(function(t){t.forEach(function(t,o){e.timeOffGroup.push({id:t.timeoffgroupid,entityValue:t.timeOffGroup,entityColor:t.timeOffGroupColor,cardState:"view"})})},function(t){console.log(t);e.message="Error: "+t.status+" "+t.statusText});e.updateDB=function(e){o.update({timeoffgroupid:e.id},{timeOffGroup:e.entityValue,timeOffGroupColor:e.entityColor})};e.testAdminSetting={cardType:"view"};e.testAdminData={entityValue:"Paid Time Off",colorValue:"#FFF"}}]).controller("UsersAdminController",["$scope","$state",function(e,t){console.log("users admin")}]).controller("HeaderController",["$scope","$state","$rootScope","employeeFactory",function(e,t,o,n){e.stateis=function(e){return t.is(e)};e.stateincludes=function(e){return t.current.name.includes(e)}}]);angular.module("ptoApp").directive("selectDate",function(){return{scope:{value:"=",record:"=",record2:"=",inputname:"@",servicename:"@",dateFormat:"=?",action:"@",max:"=?",min:"=?"},controller:function(e,t,o,n,r,a,i){$(document).keydown(function(t){if(e.editing&&t.keyCode=="13")e.submit()});var l=r.get(e.servicename);e.editing=false;e.oldval="";e.edit=function(){e.oldval=e.value;e.editing=true};e.submit=function(){e.editing=false;if(e.record2==undefined){l[e.action](e.record,e.value)}else{l[e.action](e.record,e.record2,e.value)}};e.cancel=function(){e.value=e.oldval;e.editing=false};e.datepickers={};e.open=function(){a(function(){e.opened=true})};e.openDatePicker=function(o){a(function(){e.datepickers[o]=true;t[e.inputname].open($event)})}},restrict:"E",replace:true,templateUrl:obj+"tm_template_select_date.html"}});angular.module("ptoApp").directive("editInput",function(){return{scope:{value:"=",record:"=",record2:"=",servicename:"@",action:"@",currencyOn:"@",inputtype:"@?",minValue:"=?",maxValue:"@?"},controller:function(e,t,o,n,r){o.hasOwnProperty("currencyOn")?e.currencyOn=true:e.currencyOn=false;var a=r.get(e.servicename);e.editing=false;e.oldval="";e.edit=function(){e.oldval=e.value;e.editing=true};e.submit=function(){if(e.record2==undefined){a[e.action](e.record,e.value);console.log("no second record")}else{a[e.action](e.record,e.record2,e.value);console.log(" second record exists")}e.editing=false};e.cancel=function(){e.value=e.oldval;e.editing=false}},restrict:"E",replace:true,templateUrl:"template_editable_input.html"}});angular.module("ptoApp").directive("groupCard",["$filter",function(e){return{restrict:"E",scope:{cardobj:"=cardobj",settings:"=settings"},controller:["$scope","$element","$attrs","$location","$injector",function(e,t,o,n,r){console.log(e.cardobj.timeOffGroup)}],replace:true,templateUrl:"views/group_card.html"}}]);angular.module("ptoApp").directive("ruleCard",["$filter",function(e){return{restrict:"E",scope:{cardobj:"=cardobj",settings:"=settings"},controller:["$scope","$element","$attrs","$location","$injector",function(e,t,o,n,r){console.log(e.cardobj.timeOffGroup)}],replace:true,templateUrl:"views/rule_card.html"}}]);"use strict";angular.module("ptoApp").constant("baseURLEmployee","https://jhwhb4l88l.execute-api.us-east-1.amazonaws.com/dev/").constant("baseURLEmployeeType","https://313eil8vh4.execute-api.us-east-1.amazonaws.com/dev/").constant("baseURLRequest","https://nqehj2871e.execute-api.us-east-1.amazonaws.com/dev/").constant("baseURLTimeOffGroup","https://pwqlomgq89.execute-api.us-east-1.amazonaws.com/dev/").constant("baseURLTimeType","https://jq2npw66ai.execute-api.us-east-1.amazonaws.com/dev/").constant("baseURLTimeState","https://hmmoye191c.execute-api.us-east-1.amazonaws.com/dev/").factory("employeeFactory",["$resource","baseURLEmployee",function(e,t){return e(t+"employee/:employeeid",{employeeid:"@employeeid"},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:true},remove:{method:"DELETE"},delete:{method:"DELETE"},update:{method:"PUT"}})}]).factory("employeeTypeFactory",["$resource","baseURLEmployeeType",function(e,t){return e(t+"employeetype/:employeetypeid",{employeetypeid:"@employeetypeid"},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:true},remove:{method:"DELETE"},delete:{method:"DELETE"},update:{method:"PUT"}})}]).factory("requestFactory",["$resource","baseURLRequest",function(e,t){return e(t+"request/:requestid",{requestid:"@requestid"},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:true},remove:{method:"DELETE"},delete:{method:"DELETE"},update:{method:"PUT"}})}]).factory("timeOffGroupFactory",["$resource","baseURLTimeOffGroup",function(e,t){return e(t+"timeoffgroup/:timeoffgroupid",{timeoffgroupid:"@timeoffgroupid"},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:true},remove:{method:"DELETE"},delete:{method:"DELETE"},update:{method:"PUT"}})}]).factory("timeTypeFactory",["$resource","baseURLTimeType",function(e,t){return e(t+"timetype/:timetypeid",{timetypeid:"@timetypeid"},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:true},remove:{method:"DELETE"},delete:{method:"DELETE"},update:{method:"PUT"}})}]).factory("timeStateFactory",["$resource","baseURLTimeState",function(e,t){return e(t+"timestate/:timestateid",{timestateid:"@timestateid"},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:true},remove:{method:"DELETE"},delete:{method:"DELETE"},update:{method:"PUT"}})}]);angular.module("ptoApp").directive("userCard",["$filter",function(e){return{restrict:"E",scope:{cardobj:"=cardobj",settings:"=settings"},controller:["$scope","$element","$attrs","$location","$injector",function(e,t,o,n,r){e.editColor=function(){e.settings.cardType==="edit"?e.settings.cardType="view":e.settings.cardType="edit"};e.cardobj.employeeStartDate=new Date(e.cardobj.employeeStartDate);e.inlineOptions={customClass:s,minDate:new Date,showWeeks:true};e.dateOptions={dateDisabled:a,formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1};function a(e){var t=e.date,o=e.mode;return o==="day"&&(t.getDay()===0||t.getDay()===6)}e.toggleMin=function(){e.inlineOptions.minDate=e.inlineOptions.minDate?null:new Date;e.dateOptions.minDate=e.inlineOptions.minDate};e.toggleMin();e.open=function(t){console.log("open1:"+e.popup1.opened);e.popup1.opened=true};e.setDate=function(t,o,n){e.dt=new Date(t,o,n)};e.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"];e.format=e.formats[0];e.altInputFormats=["M!/d!/yyyy"];e.popup1={opened:false};var i=new Date;i.setDate(i.getDate()+1);var l=new Date;l.setDate(i.getDate()+1);e.events=[{date:i,status:"full"},{date:l,status:"partially"}];function s(t){var o=t.date,n=t.mode;if(n==="day"){var r=new Date(o).setHours(0,0,0,0);for(var a=0;a<e.events.length;a++){var i=new Date(e.events[a].date).setHours(0,0,0,0);if(r===i){return e.events[a].status}}}return""}}],replace:true,templateUrl:"views/user_card.html"}}]);